<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycompany.kosa_space.dao.AttendanceDao">
   
   <select id="selectByMid" parameterType="string" resultType="attendance">
	    select *
		from attendance
		where mid=#{mid} and rownum=1
		order by adate desc
   </select>
   
   <!-- (운영진) 교육생 활성화 기능  -->
   <insert id="active" parameterType="attendance">
  		insert into attendance(
			mid, adate, acheckin, astatus, aconfirm, cno, 
			acheckinstatus, acheckoutstatus, approvecnt, latenesscnt, absencecnt
		)
		values (
			#{mid}, #{adate}, #{acheckin}, #{astatus}, #{aconfirm}, #{cno},
			#{acheckinstatus}, #{acheckoutstatus}, #{approvecnt}, #{latenesscnt}, #{absencecnt}
		)
   </insert>
   
   <select id="selectCntByAdate" parameterType="date">
	   	select count(adate)
		from attendance
		where adate=#{adate}
   </select>
   
   <insert id="insert" parameterType="attendance">
  		insert into attendance(
			mid, adate, acheckin, astatus, aconfirm, cno, 
			approvecnt, latenesscnt, absencecnt
		)
		values (
			#{mid}, #{adate}, #{acheckin}, #{astatus}, #{aconfirm}, #{cno},
			#{approvecnt}, #{latenesscnt}, #{absencecnt}
		)
   </insert>
   
   <update id="updateCheckout" parameterType="attendance">
   		update attendance set
   			acheckout=#{acheckout}
   		where mid=#{mid} and adate=#{adate}
   </update>
   
</mapper>