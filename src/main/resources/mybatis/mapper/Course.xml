<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycompany.kosa_space.dao.CourseDao">
   
   <insert id="insert" parameterType="course">
		<selectKey keyProperty="cno" resultType="int" order="BEFORE">
			select seq_cno.nextval from dual
		</selectKey>
		insert into course(
			cno, trno, cname, ccode, ctotalnum, cstartdate, cenddate, crequireddate,
			cstatus, cprofessor, cmanager, ctrainingdate, ctrainingtime, ccreatedat
		)
		values (
			#{cno}, #{trno}, #{cname}, #{ccode}, #{ctotalnum}, #{cstartdate}, #{cenddate}, #{crequireddate}, 
			#{cstatus}, #{cprofessor}, #{cmanager}, #{ctrainingdate}, #{ctrainingtime}, sysdate
		)
	</insert>
	
	<update id="update" parameterType="map">
		update course set
			trno=#{course.trno}, cname=#{course.cname}, ccode=#{course.ccode},
			ctotalnum=#{course.ctotalnum}, cstartdate=#{course.cstartdate}, 
			cenddate=#{course.cenddate}, crequireddate=#{course.crequireddate},
			cstatus=#{course.cstatus}, cprofessor=#{course.cprofessor},
			cmanager=#{course.cmanager}, ctrainingdate=#{course.ctrainingdate},
			ctrainingtime=#{course.ctrainingtime}, cupdatedat=sysdate
		where cno=#{cno}
	</update>
	
	<select id="selectByCnameAndCstatus" parameterType="map" resultType="int">
		select cno
		from course
		where trno=#{trno} and cstatus=#{cstatus} and cname=#{cname}
	</select>
	
	<select id="selectByCno" parameterType="int" resultType="course">
		select *
		from course
		where cno=#{cno}
	</select>

   <select id="readCourse" parameterType="String" resultType="course">
   		select cno, ccode, ctotalnum, cstatus
   		from course
   		where cname = #{cname}
   </select>
</mapper>